# ============================================================================
# AIT-AUTHENTICATOR Environment Configuration
# ============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!
# ============================================================================

# ----------------------------------------------------------------------------
# Application Configuration
# ----------------------------------------------------------------------------
NODE_ENV=development
PORT=3002
API_VERSION=v1

# ----------------------------------------------------------------------------
# JWT Configuration
# ----------------------------------------------------------------------------
# Access Token (15 minutes)
JWT_ACCESS_SECRET=your-super-secret-access-key-change-this-in-production-min-32-chars
JWT_ACCESS_EXPIRES_IN=15m

# Refresh Token (7 days)
JWT_REFRESH_SECRET=your-super-secret-refresh-key-change-this-in-production-min-32-chars
JWT_REFRESH_EXPIRES_IN=7d

# ----------------------------------------------------------------------------
# OAuth2 Providers
# ----------------------------------------------------------------------------

# Google OAuth2
# Get credentials from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_CALLBACK_URL=http://localhost:3002/auth/google/callback

# Microsoft OAuth2
# Get credentials from: https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps
MICROSOFT_CLIENT_ID=your-microsoft-client-id
MICROSOFT_CLIENT_SECRET=your-microsoft-client-secret
MICROSOFT_CALLBACK_URL=http://localhost:3002/auth/microsoft/callback
MICROSOFT_TENANT=common

# ----------------------------------------------------------------------------
# Database Configuration
# ----------------------------------------------------------------------------
# PostgreSQL
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=ait_authenticator
DATABASE_USERNAME=postgres
DATABASE_PASSWORD=postgres
DATABASE_SCHEMA=public
DATABASE_SSL=false
DATABASE_SYNCHRONIZE=true
DATABASE_LOGGING=true

# Alternative: Database URL (overrides individual settings)
# DATABASE_URL=postgresql://postgres:postgres@localhost:5432/ait_authenticator

# ----------------------------------------------------------------------------
# Redis Configuration (Session Store)
# ----------------------------------------------------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TTL=3600

# Alternative: Redis URL (overrides individual settings)
# REDIS_URL=redis://localhost:6379

# ----------------------------------------------------------------------------
# SSO Configuration (Cross-Platform Authentication)
# ----------------------------------------------------------------------------
# Cookie domain for SSO (use leading dot for subdomains)
COOKIE_DOMAIN=.sorianomediadores.es
COOKIE_SECURE=true
COOKIE_SAME_SITE=lax

# Frontend URLs (for OAuth callbacks)
FRONTEND_URL=https://app.sorianomediadores.es
ADMIN_URL=https://admin.sorianomediadores.es

# ----------------------------------------------------------------------------
# CORS Configuration
# ----------------------------------------------------------------------------
CORS_ORIGINS=http://localhost:3000,http://localhost:3001,https://app.sorianomediadores.es,https://admin.sorianomediadores.es
CORS_CREDENTIALS=true

# ----------------------------------------------------------------------------
# MFA Configuration (Multi-Factor Authentication)
# ----------------------------------------------------------------------------
MFA_ISSUER=Soriano Mediadores
MFA_WINDOW=1

# ----------------------------------------------------------------------------
# Security Configuration
# ----------------------------------------------------------------------------
# Password Requirements
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SYMBOLS=true

# Account Lockout (after failed login attempts)
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION=900

# Session Configuration
SESSION_TIMEOUT=3600
SESSION_ABSOLUTE_TIMEOUT=86400

# ----------------------------------------------------------------------------
# Rate Limiting
# ----------------------------------------------------------------------------
# Requests per minute per IP
RATE_LIMIT_AUTH=5
RATE_LIMIT_REFRESH=10
RATE_LIMIT_MFA=3
RATE_LIMIT_DEFAULT=100

# ----------------------------------------------------------------------------
# Email Configuration (for verification, password reset, etc.)
# ----------------------------------------------------------------------------
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-email-password
SMTP_FROM=noreply@sorianomediadores.es

# Alternative: SendGrid
# SENDGRID_API_KEY=your-sendgrid-api-key

# ----------------------------------------------------------------------------
# Logging Configuration
# ----------------------------------------------------------------------------
LOG_LEVEL=info
LOG_FILE=logs/ait-authenticator.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=7
LOG_FORMAT=json

# ----------------------------------------------------------------------------
# Monitoring & Metrics
# ----------------------------------------------------------------------------
# Prometheus metrics endpoint
METRICS_ENABLED=true
METRICS_PORT=9090

# Sentry error tracking
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
# SENTRY_ENVIRONMENT=development

# ----------------------------------------------------------------------------
# Webhooks (Optional)
# ----------------------------------------------------------------------------
# Send authentication events to external services
WEBHOOK_ENABLED=false
WEBHOOK_URL=https://your-webhook-endpoint.com/auth-events
WEBHOOK_SECRET=your-webhook-secret

# ----------------------------------------------------------------------------
# Development Configuration
# ----------------------------------------------------------------------------
# Enable debug mode (more verbose logging)
DEBUG=false

# Enable Swagger API documentation
SWAGGER_ENABLED=true
SWAGGER_PATH=api/docs

# Seed test data
SEED_TEST_DATA=false

# ----------------------------------------------------------------------------
# Production Configuration (uncomment for production)
# ----------------------------------------------------------------------------
# NODE_ENV=production
# DATABASE_SSL=true
# DATABASE_SYNCHRONIZE=false
# COOKIE_SECURE=true
# SWAGGER_ENABLED=false
# DEBUG=false

# ============================================================================
# IMPORTANT SECURITY NOTES
# ============================================================================
# 1. Generate strong secrets (min 32 characters):
#    node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#
# 2. In production:
#    - Set NODE_ENV=production
#    - Use strong, unique secrets
#    - Enable SSL/TLS for database
#    - Set COOKIE_SECURE=true
#    - Disable SWAGGER_ENABLED
#    - Use environment-specific URLs
#
# 3. Never commit .env to version control
#    Add .env to .gitignore
#
# 4. Use environment variables in production (not .env file)
#    Most hosting providers support environment variables
# ============================================================================
